{"ast":null,"code":"const container = document.querySelector(\".container\");\nconst seats = document.querySelectorAll(\".row .seat:not(.sold)\");\nconst count = document.getElementById(\"count\");\nconst total = document.getElementById(\"total\");\nconst movieSelect = document.getElementById(\"movie\");\npopulateUI();\nlet ticketPrice = +movieSelect.value;\n\n// Save selected movie index and price\nfunction setMovieData(movieIndex, moviePrice) {\n  localStorage.setItem(\"selectedMovieIndex\", movieIndex);\n  localStorage.setItem(\"selectedMoviePrice\", moviePrice);\n}\n\n// Update total and count\nfunction updateSelectedCount() {\n  const selectedSeats = document.querySelectorAll(\".row .seat.selected\");\n  const seatsIndex = [...selectedSeats].map(seat => [...seats].indexOf(seat));\n  localStorage.setItem(\"selectedSeats\", JSON.stringify(seatsIndex));\n  const selectedSeatsCount = selectedSeats.length;\n  count.innerText = selectedSeatsCount;\n  total.innerText = selectedSeatsCount * ticketPrice;\n  setMovieData(movieSelect.selectedIndex, movieSelect.value);\n}\n\n// Get data from localstorage and populate UI\nfunction populateUI() {\n  const selectedSeats = JSON.parse(localStorage.getItem(\"selectedSeats\"));\n  if (selectedSeats !== null && selectedSeats.length > 0) {\n    seats.forEach((seat, index) => {\n      if (selectedSeats.indexOf(index) > -1) {\n        console.log(seat.classList.add(\"selected\"));\n      }\n    });\n  }\n  const selectedMovieIndex = localStorage.getItem(\"selectedMovieIndex\");\n  if (selectedMovieIndex !== null) {\n    movieSelect.selectedIndex = selectedMovieIndex;\n    console.log(selectedMovieIndex);\n  }\n}\nconsole.log(populateUI());\n// Movie select event\nmovieSelect.addEventListener(\"change\", e => {\n  ticketPrice = +e.target.value;\n  setMovieData(e.target.selectedIndex, e.target.value);\n  updateSelectedCount();\n});\n\n// Seat click event\ncontainer.addEventListener(\"click\", e => {\n  if (e.target.classList.contains(\"seat\") && !e.target.classList.contains(\"sold\")) {\n    e.target.classList.toggle(\"selected\");\n    updateSelectedCount();\n  }\n});\n\n// Initial count and total set\nupdateSelectedCount();","map":{"version":3,"names":["container","document","querySelector","seats","querySelectorAll","count","getElementById","total","movieSelect","populateUI","ticketPrice","value","setMovieData","movieIndex","moviePrice","localStorage","setItem","updateSelectedCount","selectedSeats","seatsIndex","map","seat","indexOf","JSON","stringify","selectedSeatsCount","length","innerText","selectedIndex","parse","getItem","forEach","index","console","log","classList","add","selectedMovieIndex","addEventListener","e","target","contains","toggle"],"sources":["/Users/plabs/Documents/putri/project_plabs/tmovies-ui/src/components/kursi/script.js"],"sourcesContent":["const container = document.querySelector(\".container\");\nconst seats = document.querySelectorAll(\".row .seat:not(.sold)\");\nconst count = document.getElementById(\"count\");\nconst total = document.getElementById(\"total\");\nconst movieSelect = document.getElementById(\"movie\");\n\npopulateUI();\n\nlet ticketPrice = +movieSelect.value;\n\n// Save selected movie index and price\nfunction setMovieData(movieIndex, moviePrice) {\n  localStorage.setItem(\"selectedMovieIndex\", movieIndex);\n  localStorage.setItem(\"selectedMoviePrice\", moviePrice);\n}\n\n// Update total and count\nfunction updateSelectedCount() {\n  const selectedSeats = document.querySelectorAll(\".row .seat.selected\");\n\n  const seatsIndex = [...selectedSeats].map((seat) => [...seats].indexOf(seat));\n\n  localStorage.setItem(\"selectedSeats\", JSON.stringify(seatsIndex));\n\n  const selectedSeatsCount = selectedSeats.length;\n\n  count.innerText = selectedSeatsCount;\n  total.innerText = selectedSeatsCount * ticketPrice;\n\n  setMovieData(movieSelect.selectedIndex, movieSelect.value);\n}\n\n\n// Get data from localstorage and populate UI\nfunction populateUI() {\n  const selectedSeats = JSON.parse(localStorage.getItem(\"selectedSeats\"));\n\n  if (selectedSeats !== null && selectedSeats.length > 0) {\n    seats.forEach((seat, index) => {\n      if (selectedSeats.indexOf(index) > -1) {\n        console.log(seat.classList.add(\"selected\"));\n      }\n    });\n  }\n\n  const selectedMovieIndex = localStorage.getItem(\"selectedMovieIndex\");\n\n  if (selectedMovieIndex !== null) {\n    movieSelect.selectedIndex = selectedMovieIndex;\n    console.log(selectedMovieIndex)\n  }\n}\nconsole.log(populateUI())\n// Movie select event\nmovieSelect.addEventListener(\"change\", (e) => {\n  ticketPrice = +e.target.value;\n  setMovieData(e.target.selectedIndex, e.target.value);\n  updateSelectedCount();\n});\n\n// Seat click event\ncontainer.addEventListener(\"click\", (e) => {\n  if (\n    e.target.classList.contains(\"seat\") &&\n    !e.target.classList.contains(\"sold\")\n  ) {\n    e.target.classList.toggle(\"selected\");\n\n    updateSelectedCount();\n  }\n});\n\n// Initial count and total set\nupdateSelectedCount();\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}